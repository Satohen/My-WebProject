<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 10. 文件相關資訊 -->
  <meta name="description" content="Free Web tutorials">
  <meta name="keywords" content="HTML, CSS, JavaScript">
  <meta name="author" content="Liu">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 安插bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <!-- 安插jquery -->
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript"></script>
  <!-- 網頁標題icon -->
  <link rel="icon" href="./長榮航空img/長榮小icon.png" type="image/x-icon" />
  <link rel="shortcut icon" href="./長榮航空img/長榮小icon.png" type="image/x-icon" />
  </script>
</head>

<body>



  <!-- 移動式標題列 -->
  <nav class="navbar navbar-expand-lg bg-light fixed-top ">
    <!-- 飛機logo首頁 -->
    <div class="d-flex jutisfy-content-start"> <a href="./index.html">
        <img src="./img/logo-evaair-header.png" alt="長榮logo" class="img-fluid w-75">
      </a>
    </div>

    <!-- 下拉式標題 -->
    <div class="container-fluid">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex justify-content-between  w-50">
        <li class="nav-item dropdown ">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">企業商務旅行</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            優惠與訂票</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <a class="dropdown-item" href="#">Something else here</a>
            </li>
          </ul>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            行程管理</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            無限萬里遊
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
      </ul>
      <!-- 登入及註冊 -->
      <div class="ms-auto">
        <a href="./login.html" class="btn">登入</a>
        <span>|</span>
        <a href="./regis.html" class="btn">註冊</a>
      </div>
      <!-- 搜尋 問號icon -->
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-question-circle"
          viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
          <path
            d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
        </svg>
      </div>
      <div class="ms-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-search"
          viewBox="0 0 16 16">
          <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
        </svg>
      </div>
    </div>
  </nav>




  <!-- 選擇欄位 -->
  <div class="" style="margin-top: 60px; margin-left: 10%;">
    <table id="select_table">
      <tr>
        <th>
          <p>
          <h3>日期</h3>
          </p><input type="date" id="datePicker" />
        </th>
        <th>
          <p>
          <h3>起點</h3>
          </p><select type="select" id="input_go">
            <option value="台北-桃園">台北-桃園</option>
            <option value="台北-松山">台北-松山</option>
        </th>
        <th>
          <p>
          <h3>終點</h3>
          </p><select type="select" id="input_back">
            <option value="東京">東京</option>
            <option value="大阪">大阪</option>
            <option value="沖繩">沖繩</option>
            <option value="首爾">首爾</option>
            <option value="曼谷">曼谷</option>
            <option value="香港">香港</option>
            <option value="福岡">福岡</option>
        </th>
        <th></th>
      </tr>
    </table>
  </div>
  <!-- 顯示欄位 -->
  <div class="" style="margin-top: 60px; margin-left: 10%;">
    <fieldset style="object-fit: contain; border: 2px solid lightslategray; width: 80%; ">
      <legend>航班到離動態</legend>
      <table id="jobList" class="table" style="object-fit: contain; width: 100%; "   >
        <thead>
          <tr>
            <th>
              <h4 id="th_date"></h4>
            </th>
            <th>
              <h4 id="th_go"></h4>
            </th>
            <th>
              <h4 id="th_back"></h4>
            </th>
            <th>
              <h4 id=""></h4>
            </th>
            <th>
            </th>
            <th>
            </th>
          </tr>
        </thead>
        <tr class="bg-success" style="height: 5%; color: white;">
          <td>班機編號
          </td>
          <td>行程</td>
          <td>航班狀態</td>
          <td>啟程點</td>
          <td>目的地</td>
          <td>出發時間</td>
          <td>抵達時間</td>
        </tr>
        <tbody id="tbody">
          <tr>
            <td id="f_id">班機編號
            </td>
            <td id="f_agenda">行程</td>
            <td id="f_status">航班狀態</td>
            <td id="f_go">出發</td>
            <td id="f_goal">抵達</td>
            <td></td>          
          </tr>
          <tr>
            <td>班機編號
            </td>
            <td>行程</td>
            <td>航班狀態</td>
            <td>出發</td>
            <td>抵達</td>
            <td></td>
          </tr>
          <tr>
            <td>班機編號
            </td>
            <td>行程</td>
            <td>航班狀態</td>
            <td>出發</td>
            <td>抵達</td>
            <td></td>
          </tr>       
          <tr>
            <td>班機編號
            </td>
            <td>行程</td>
            <td>航班狀態</td>
            <td>出發</td>
            <td>抵達</td>
            <td></td>
          </tr>       
      </tbody>
      </table>
    </fieldset>
  </div>

  <script type="text/javascript" src="search.js"></script>






<!-- 靜態使用 -->
<!-- <script>
var TPTO = [
      {
        todoTableId: 1, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 2, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 3, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      }
    ]; 
    
    var TPHK = [
      {
        todoTableId: 1, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 2, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 3, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      }
    ];
    var TPOS = [
      {
        todoTableId: 1, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 2, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      },
      {
        todoTableId: 3, flightNumber: "BR867", itinerary: "台北桃園 (TPE) 到香港 (HKG)",
        flightStatus: "已出發", departureAirport: "桃園機場", arrivalAirport: "香港機場",
        scheduledDeparture: "2023/11/01 07:10", actualDeparture: "2023/11/01 07:10",
        scheduledArrival: "2023/11/01 09:10", estimatedArrival: "2023/11/01 09:10",
        isComplete: 1
      }
    ];




    

// GPT產生
function filterAndPopulateTable(date, departure, destination) {
  // 选择要筛选的数据，例如 TPTO, TPHK, TPOS
  var selectedData = [];
  if (departure == "台北-桃園" && destination == "東京") {
    selectedData = TPTO;
  } else if (departure == "台北-桃園" && destination == "大阪") {
    selectedData = TPHK;
  } else if (departure == "台北-桃園" && destination == "沖繩") {
    selectedData = TPOS;
  }

  // 清空表格
  $("#tbody").empty();

  // 填充表格
  $.each(selectedData, function (index, item) {
    var trHtml = `
      <tr>
        <td id="f_id">${item.flightNumber}</td>
        <td id="f_agenda">${item.itinerary}</td>
        <td id="f_status">${item.flightStatus}</td>
        <td id="f_go">${item.departureAirport}</td>
        <td id="f_goal">${item.arrivalAirport}</td>
        <td></td>
      </tr>
    `;
    $("#tbody").append(trHtml);
  });
}

// 监听日期、出发地和目的地的变化
$("#datePicker, #input_go, #input_back").on("change", function () {
  var selectedDate = $("#datePicker").val();
  var selectedDeparture = $("#input_go").val();
  var selectedDestination = $("#input_back").val();

  // 调用筛选和填充表格的函数
  filterAndPopulateTable(selectedDate, selectedDeparture, selectedDestination);
});
</script> -->




<script>



    // 模仿老師





    // 試試看
     // 這裡需要添加其他目的地的映射

  var destinationMapping = {
  "香港": "HKG",
  "大阪": "KIX",
  "曼谷": "BKK",
  "東京": "NRT",
  "沖繩": "OKA",
  "首爾": "ICN",
  "福岡": "FUK",
  "東京": "HND",
  "台北-桃園":"TPE",
  "台北-松山":"TSA"
};



$("#tbody").empty();
$("#input_go, #input_back").on("change", function () {
  var departure = $("#input_go").val();
  var destination = $("#input_back").val();
  
  // 使用映射查找英文縮寫  使用組合來找到對應的班機
  var departureCode = destinationMapping[departure];
  var destinationCode = destinationMapping[destination];
  var key = departureCode + destinationCode;
  
  if (key) {
    $("#tbody").empty();
    // 發送 GET 請求到伺服器路由，使用英文縮寫
    $.get("/todo/item/destination/"+key, function (data) {
      $.each(data, function (index, item) {
        var trHtml = `
          <tr>
            <td id="f_id">${item.flightNumber}</td>
            <td id="f_agenda">${item.itinerary}</td>
            <td id="f_status">${item.flightStatus}</td>
            <td id="f_go">${item.departureAirport}</td>
            <td id="f_goal">${item.arrivalAirport}</td>
            <td>${item.scheduledDeparture}</td>
            <td>${item.scheduledArrival}</td>
          </tr>
        `;
        $("#tbody").append(trHtml);
      });
    });
  } else {
    alert("未找到目的地。");
  }
});



  </script>

























  <div class="mt-5 pt-2" style="background-color: lightgray; width: 80%; margin-left: 10%;">
    <ul>
      <div style="width:90px;  border-radius: 40%; background: darkgray; text-align: center;">注意事項</div>
      <li>由於航班情況可能隨時更改，建議您隨時留意網站上提供的班機訊息服務或與本公司當地機場和辦事處聯絡。</li>
      <li>目前尚無法提供部分包機及非本公司營運之聯航航班資料。
      </li>
      <li>您可於航班時刻表線上查詢查詢未來360天內之客機航班時刻表。
      </li>
      <li>線上申請/列印航班到離證明限航班抵達後至180天內申請，若超過180天，需臨櫃辦理。
      </li>
    </ul>
  </div>



</body>

</html>