<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 10. 文件相關資訊 -->
  <meta name="description" content="Free Web tutorials">
  <meta name="keywords" content="HTML, CSS, JavaScript">
  <meta name="author" content="Liu">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 安插bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <!-- 安插jquery -->
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript"></script>
  <!-- 網頁標題icon -->
  <link rel="icon" href="./長榮航空img/長榮小icon.png" type="image/x-icon" />
  <link rel="shortcut icon" href="./長榮航空img/長榮小icon.png" type="image/x-icon" />
  </script> 
  <!-- 安插登入按鈕的css -->
  <link rel="stylesheet" href="./個樣式css資料/登入按鈕.css">




  <!-- 搜尋表格css -->
  <style>
    /* 通用樣式 */
.container {
  padding: 2rem;
}

/* 表格樣式 */
.table-striped tbody tr:nth-of-type(odd) {
  background-color: rgba(0,0,0,.05);
}

.table-responsive {
  border: 1px solid #dee2e6;
  border-radius: .25rem;
}

/* 輸入組樣式 */
.input-group-text {
  min-width: 80px; /* 確保標籤寬度一致 */
}

/* 按钮样式 */
.btn-success {
  background-color: #28a745;
  border-color: #28a745;
}

.btn-success:hover {
  background-color: #218838;
  border-color: #1e7e34;
}

/* 表頭樣式 */
.thead-dark th {
  background-color: #343a40;
  color: #fff;
}




/* 注意事項css */

.notice-container {
  background-color: #f8f9fa; /* 輕灰色背景 */
  border-left: 4px solid rgba(255, 0, 0, 0.835); /* 藍色左邊框作為強調 */
  padding: 20px; /* 內邊距 */
  margin: 30px auto; /* 居中且有上下間距 */
  border-radius: 5px; /* 輕微圓角 */
  max-width: 80%; /* 最大寬度限制 */
  box-shadow: 0 2px 4px rgba(0,0,0,.1); /* 箱型陰影 */
}

.notice-header {
  background: darkgray;
  color: white;
  border-radius: 50%;
  width: 100px;
  margin-bottom: 15px;
  text-align: center;
  font-weight: bold;
  padding: 5px;
  font-size: 0.9rem;
}

.notice-list {
  list-style: none; /* 移除列表符號 */
  padding-left: 0; /* 移除內置的填充 */
}

.notice-list li {
  padding: 5px 0; /* 列表項目上下填充 */
  border-bottom: 1px solid #e9ecef; /* 底部邊框 */
}

.notice-list li:last-child {
  border-bottom: none; /* 最後一個列表項目沒有底部邊框 */
}

  </style>
</head>

<body>
    <!-- 移動式標題列 -->
    <nav class="navbar navbar-expand-lg bg-light fixed-top ">
      <!-- 飛機logo首頁 -->
      <div class="d-flex jutisfy-content-start"> <a href="./index.html">
              <img src="./img/logo-evaair-header.png" alt="長榮logo" class="img-fluid w-75">
          </a>
      </div>

      <!-- 下拉式標題 -->
      <div class="container-fluid">

          <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex justify-content-between  w-50">
              <li class="nav-item dropdown ">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      企業商務旅行
                  </a>
                  <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">主題活動</a></li>
                      <li><a class="dropdown-item" href="#">熱門活動</a></li>
                      <li>
                          <hr class="dropdown-divider">
                      </li>
                      <li><a class="dropdown-item" href="#">限時促銷</a></li>
                  </ul>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      機票與訂位管理
                  </a>
                  <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">登入</a></li>
                      <li><a class="dropdown-item" href="#">訂位</a></li>
                      <li>
                          <hr class="dropdown-divider">
                      </li>
                      <li>
                          <a class="dropdown-item" href="#">取消全部行程</a>
                      </li>
                  </ul>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      行程管理
                  </a>
                  <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">機票定位</a></li>
                      <li><a class="dropdown-item" href="#">管理行程</a></li>
                      <li>
                          <hr class="dropdown-divider">
                      </li>
                      <li><a class="dropdown-item" href="#">其他</a></li>
                  </ul>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      無限萬里遊
                  </a>
                  <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">航班到離查詢</a></li>
                      <li><a class="dropdown-item" href="#">機場服務</a></li>
                      <li>
                          <hr class="dropdown-divider">
                      </li>
                      <li><a class="dropdown-item" href="#">特別需求與協助</a></li>
                  </ul>
          </ul>

    <!-- 登入及註冊 -->
    <nav id="loginop" style="margin-left: 560px; margin-bottom: 40px;  ">
      <div class="user-menu">
        <!-- 使用者名稱與下拉箭頭 -->
        <div id="user-info" class="btn">
          <span id="username"  >使用者名稱</span>
          <span id="arrow">&#9660;</span>
        </div>
        <!-- 下拉式選單 -->
        <div id="dropdown-content">
          <a href="#" id="profile-link">會員頁面</a>
          <a href="#" id="logout-link">登出</a>
        </div>
      </div>
    </nav>

    <!-- 登入及註冊 -->
    <div class="ms-auto">
      <a href="./login.html" id="toLogin" class="btn">登入</a>
      <span>|</span>
      <a href="./regis.html" class="btn">註冊</a>
    </div>
</nav>



<!-- 尋找頁面 -->
      <!-- 選擇欄位 -->
      <div class="container mt-5">
        <div class="row">
          <div class="col-md-10 offset-md-1">
            <!-- 選擇欄位 -->
            <div class="mb-4">
              <div class="input-group mb-3">
                <span class="input-group-text">日期</span>
                <input type="date" class="form-control" id="datePicker">
              </div>
              <div class="input-group mb-3">
                <span class="input-group-text">起點</span>
                <select class="form-control" id="input_go">
                  <option value="台北-桃園">台北-桃園</option>
                  <option value="台北-松山">台北-松山</option>
                </select>
              </div>
              <div class="input-group mb-3">
                <span class="input-group-text">終點</span>
                <select type="select" class="form-control" id="input_back">
                  <option value="東京">東京</option>
                  <option value="大阪">大阪</option>
                  <option value="沖繩">沖繩</option>
                  <option value="首爾">首爾</option>
                  <option value="曼谷">曼谷</option>
                  <option value="香港">香港</option>
                  <option value="福岡">福岡</option>
                  <!-- 其他選項 -->
                </select>
              </div>
            </div>
            
            <!-- 顯示欄位 -->
            <div class="table-responsive">
              <table class="table table-striped">
                <thead class="thead-dark">
                  <tr>
                    <th>班機編號</th>
                    <th>行程</th>
                    <th>航班狀態</th>
                    <th>起飛點</th>
                    <th>目的地</th>
                    <th>出發時間</th>
                    <th>抵達時間</th>
                  </tr>
                </thead>
                <tbody id="tbody">
                  <!-- 动态生成的行 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      
      <script type="text/javascript" src="search.js"></script>



      <script>
        //檢查是否登入 並給予名字(其他頁面需要)
        var currentUser = JSON.parse(localStorage.getItem("currentUser"));

        if (currentUser) {
          // 用户已登录，显示用户名
          console.log("用戶已登入:", currentUser.userfirstname);
          var genderTtitle = currentUser.gender === "男" ? "先生" : "女士";
          var userLoginName = currentUser.userchfname + genderTtitle;
          $("#toLogin").css("visibility", "hidden")
          $("#loginop").css("visibility", "visible")
          $("#username").text(userLoginName)
        } else {
          // 用户未登录
          console.log("未登入狀態");
          $("#toLogin").css("visibility", "visible"); // 显示登录按钮
          $("#loginop").css("visibility", "hidden"); }      
                 


        // 這裡需要添加其他目的地的映射(就是設條件找json檔案)
        var destinationMapping = {
          "香港": "HKG",
          "大阪": "KIX",
          "曼谷": "BKK",
          "東京": "NRT",
          "沖繩": "OKA",
          "首爾": "ICN",
          "福岡": "FUK",
          "東京": "HND",
          "台北-桃園": "TPE",
          "台北-松山": "TSA"
        };
        $("#tbody").empty();


        $("#input_go, #input_back").on("change", function () {
          var departure = $("#input_go").val();
          var destination = $("#input_back").val();

          // 使用映射查找英文縮寫  使用組合來找到對應的班機
          var departureCode = destinationMapping[departure];
          var destinationCode = destinationMapping[destination];
          var key = departureCode + destinationCode;

          if (key) {
            $("#tbody").empty();
            // 發送 GET 請求到伺服器路由，使用英文縮寫
            $.get("/todo/item/destination/" + key, function (data) {
              $.each(data, function (index, item) {
                var trHtml = `
          <tr>
            <td id="f_id">${item.flightNumber}</td>
            <td id="f_agenda">${item.itinerary}</td>
            <td id="f_status">${item.flightStatus}</td>
            <td id="f_go">${item.departureAirport}</td>
            <td id="f_goal">${item.arrivalAirport}</td>
            <td>${item.scheduledDeparture}</td>
            <td>${item.scheduledArrival}</td>
          </tr>
        `;
        $("#tbody").append(trHtml);
              });
            });
          } else {
            alert("未找到目的地。");
          }
        });

      </script>

















<!-- 注意事項欄位 -->
<div class="notice-container">
  <div class="notice-header">注意事項</div>
  <ul class="notice-list">
    <li>由於航班情況可能隨時更改，建議您隨時留意網站上提供的班機訊息服務或與本公司當地機場和辦事處聯絡。</li>
    <li>目前尚無法提供部分包機及非本公司營運之聯航航班資料。</li>
    <li>您可於航班時刻表線上查詢查詢未來360天內之客機航班時刻表。</li>
    <li>線上申請/列印航班到離證明限航班抵達後至180天內申請，若超過180天，需臨櫃辦理。</li>
  </ul>
</div>




<script>
  // 一 載入就 填入
$(document).ready(function(){


  var departure = $("#input_go").val();
  var destination = $("#input_back").val();
  var departureCode = destinationMapping[departure];
  var destinationCode = destinationMapping[destination];
  var key = departureCode + destinationCode;

  if (key) {
    $("#tbody").empty();

    // 發送 GET 請求到伺服器路由，使用英文縮寫
    $.get("/todo/item/destination/" + key, function (data) {
      // 清空表格
      $("#tbody").empty();

      // 遍歷數據，將資料添加到表格中
      $.each(data, function (index, item) {
        var trHtml = `
          <tr>
            <td id="f_id">${item.flightNumber}</td>
            <td id="f_agenda">${item.itinerary}</td>
            <td id="f_status">${item.flightStatus}</td>
            <td id="f_go">${item.departureAirport}</td>
            <td id="f_goal">${item.arrivalAirport}</td>
            <td>${item.scheduledDeparture}</td>
            <td>${item.scheduledArrival}</td>
          </tr>
        `;
        $("#tbody").append(trHtml);
      });
    });
  } else {
    alert("未找到目的地。");
  }
});
</script>










      <!-- 這是登入切換得js -->
      <script>

        document.addEventListener("DOMContentLoaded", function () {

     
          
          
          
          // 獲取頁面元素
          var userInfo = document.getElementById("user-info");
          var dropdownContent = document.getElementById("dropdown-content");
          var profileLink = document.getElementById("profile-link");
          var logoutLink = document.getElementById("logout-link");

          // 假设用户已登录，设置用户名
          var username = localStorage.getItem("username");

          if (username) {
            document.getElementById("username").innerText = username;
          }

          // 用户信息点击事件，显示/隐藏下拉菜单
          userInfo.addEventListener("click", function () {
            dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
          });

          // 会员页面链接点击事件
          profileLink.addEventListener("click", function () {
            // 如果用户已登录，重定向到会员页面

            window.location.href = "./membership.html";

          });

          // 登出链接点击事件
          logoutLink.addEventListener("click", function () {
            // 清除登录状态和用户名
            localStorage.removeItem("currentUser");

            // 重定向到登录页面
            window.location.href = "./login.html";






          });


          
        });



      </script>

</body>

</html>